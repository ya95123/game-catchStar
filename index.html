<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="./css/bootstrap.css">
  <title>æ‰ æ˜Ÿ æ˜Ÿï¼</title>
  <style>
    * {

      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif, 'Microsoft Yahei';
    }

    html,
    body {
      height: 100%;
    }

    body {
      width: 100vw;
      height: 100vh;
      background: url(./images/bg.svg);
      cursor: url(./images/net50.png)7 7, auto;
      overflow: hidden;
      /* ç¦æ­¢åç™½ */
      -webkit-user-select: none;
      -moz-user-select: none;
      -o-user-select: none;
      user-select: none;
    }

    body:active {
      cursor: url(./images/net50-al.png)7 7, auto;
    }

    #count {
      height: 9%;
      font-size: 2.2rem;
      color: rgb(243, 255, 133);
    }

    #game-area {
      height: 82%;
      position: relative;
      /* overflow: hidden; */
    }

    #footer {
      height: 9%;
      font-size: 2.2rem;
      color: rgb(235, 235, 235);
      filter: drop-shadow(0rem 0rem 0.2rem rgb(255, 255, 100));
    }

    #rule {
      position: absolute;
      z-index: 5;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
    }

    /* è¼ªæ’­æ–‡å­—å…§å®¹ */
    .pic-text {
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      z-index: 10;
      text-align: center;
      color: white;
    }

    .pic-text p {
      font-size: 1.05rem;
    }

    #go {
      position: absolute;
      top: 63.5%;
      left: 50%;
      z-index: 11;
      transform: translateX(-50%);
      transition: 0.6s;
    }

    #go:focus {
      width: 5vmin;
      height: 5vmin;
      border-radius: 50%;
      transform: translateX(-50%) rotate(2520deg) scale(1.3);
    }

    .star {
      width: 12vmin;
      position: absolute;
    }

    .star:hover {
      filter: hue-rotate(45deg);
    }

    .star:active {
      filter: hue-rotate(300deg);
    }

    .starN {
      animation: rotate 0.15s infinite;
    }

    @keyframes rotate {
      to {
        transform: rotate(0deg);
      }

      from {
        transform: rotate(60deg);
      }
    }
  </style>
</head>

<body>
  <!-- TODO 1.éŠæˆ²ç©æ³•ä»‹ç´¹(æœ‰å·¦å³é æ–‡å­—ç„¡æ¡†?è¼ªæ’­åœ–)OK 2.é–‹å§‹æŒ‰éˆ•(å‹•ç•«ç™¼äº®) 3.éŠæˆ²ä¸­JQ(æ˜Ÿæ˜Ÿè·‘å‹•ã€è¨ˆåˆ†ã€è¨ˆæ•¸) 4.éŠæˆ²çµæŸå°è©±(è‹¥ç‚ºç¬¬ä¸€å‰‡è¼¸å…¥åå­—) -->
  <!-- *top-è¨ˆç®—å€ -->
  <div id="count" class="container-fluid d-flex justify-content-between align-items-center">
    <!-- *N1 éŠæˆ²é–‹å§‹æ™‚æ¶ˆå¤± -->
    <div id="N1">
      æ‰æ˜Ÿæ˜Ÿé”äººï¼š<span id="N1-name"></span>
      <span id="N1-num"></span>
    </div>
    <div>
      GET <b>âœ°</b>ï¼Š
      <span id="getStar-num" class="text-white">0</span>
    </div>
  </div>

  <!-- *æ˜Ÿæ˜Ÿç¯„åœ -->
  <div id="game-area" class="container-fluid p-0"></div>

  <!-- *å­˜æ´»æ˜Ÿæ˜Ÿæ•¸(é”20éŠæˆ²çµæŸ) -->
  <div id="footer" class="container-fluid d-flex justify-content-between align-items-center">
    <div>
      âš / <span id="leaveStart-num">0</span>
    </div>
  </div>

  <!-- *éŠæˆ²è¦å‰‡å°è©±æ¡† -->
  <div id="rule" class="carousel slide w-75" data-ride="carousel">
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img src="./images/trasparent-bg-text.svg" class="d-block w-100">
        <div class="pic-text">
          <h4>ä¾†æ‰æ˜Ÿæ˜Ÿå§ğŸŒŸ</h4>
          <p>æ“šèªªï¼šæ•æ‰åˆ°æ˜Ÿæ˜Ÿçš„äººï¼Œå…§å¿ƒæœƒé–‹å§‹è½‰è®Šï¼Œè®Šå¾—æ›´å¿«æ¨‚ï¼Œæ›´èƒ½å¤ äº«å—é€™ä¸€ç”Ÿï¼Œåªæ˜¯æ‰æ˜Ÿæ˜Ÿçš„åŒæ™‚ï¼Œå¿…é ˆä¿æœ‰ç´”æ½”çš„å¿ƒï¼Œè‹¥å¸¶è‘—æ€¥èºã€è²ªå©ªçš„å¿ƒï¼Œå°‡æœƒè¶Šä¾†è¶Šæ‰ä¸åˆ°...</p>
        </div>

      </div>
      <div class="carousel-item">
        <img src="./images/trasparent-bg-text.svg" class="d-block w-100">
        <div class="pic-text">
          <h4>å¦‚ä½•æ•æ‰æ˜Ÿæ˜ŸğŸ’«</h4>
          <p>æ˜Ÿæ˜Ÿæœƒå¾å››é¢å…«æ–¹å‡ºç¾ï¼Œæ™‚é–“è¶Šä¹…æœƒè¶Šä¾†è¶Šå¿«ï¼Œè«‹ä½ å°‡ä½ çš„ç¶²å­æ”¾åˆ°æ˜Ÿæ˜Ÿä¸Šé»ä¸€ä¸‹ï¼Œå°±æ•æ‰åˆ°å›‰ï¼ç•¶å¤©ç©ºæ˜Ÿæ˜Ÿå­˜ç•™10é¡†ä»¥ä¸Šï¼Œå°±æœƒè¢«é€å›åœ°çƒã€‚<br>
            <span style="color: rgb(243, 255, 133);">æ³¨æ„ï¼šæ˜Ÿæ˜Ÿå¯æ˜¯æœƒè¶Šé£›è¶Šå¿«çš„å“¦ï¼Œé‡åˆ°æµæ˜Ÿè¶•å¿«æŠ“ç·Šå®ƒï¼</span>
          </p>
        </div>
      </div>
      <div class="carousel-item">
        <img src="./images/trasparent-bg-text.svg" class="d-block w-100">
        <div class="pic-text">
          <h4>æ‰æ˜Ÿæ˜Ÿé”äººğŸ†</h4>
          <p>æ•æ‰æœ€å¤šæ˜Ÿæ˜Ÿçš„äººï¼Œå°‡æˆç‚º " æ‰æ˜Ÿæ˜Ÿé”äºº " ï¼Œä¸¦ä¸”èƒ½å¤ ç²å¾—ä¸Šå¸çš„çœ·å±¬ï¼Œä¸Šå¸çœ‹è¦‹ä½ çš„åŠªåŠ›ï¼Œä½ å°‡åœ¨å‡¡äº‹ä¸Šéƒ½å¯Œè¶³ï¼Œä¸”é †åˆ©ï¼Œè€Œä¸”ä¸Šå¸è³œçµ¦ä½ æ™ºæ…§ï¼ä½ å¯ä»¥å¥½å¥½äº«å—é€™ä¸€ç”Ÿã€‚</p>
        </div>
      </div>

      <div class="carousel-item">
        <img src="./images/trasparent-bg-text.svg" class="d-block w-100">
        <div class="pic-text">
          <h4>é¢æ¿ä»‹ç´¹</h4>
          <p>å·¦ä¸‹è§’ï¼šå¤©ç©ºæ˜Ÿæ˜Ÿæ•¸<br>å³ä¸Šè§’ï¼šæ•æ‰æ˜Ÿæ˜Ÿæ•¸<br><span style="color: rgb(243, 255, 133);">åªæœ‰æ‰æ˜Ÿæ˜Ÿé”äººæ‰å¯ä»¥å‡ºç¾åœ¨æ‰æ˜Ÿæ˜Ÿé”äººä¸Šï¼</span></p>
        </div>
      </div>
    </div>
    <a class="carousel-control-prev" href="#rule" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#rule" role="button" data-slide="next">
      <span class="carousel-control-next-icon"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>

  <!-- *é–‹å§‹æŒ‰éˆ• -->
  <button id="go" type="button" class="btn btn-outline-warning btn-sm">å‡ºç™¼</button>

  <script src="./js/jquery-3.5.1.min.js"></script>
  <script src="./js/popper.min.js"></script>
  <script src="./js/bootstrap.min.js"></script>

  <!-- * IDçµæ§‹(JQæœƒç”¨åˆ°çš„) -->
  <!--
    N1-nameï¼šæœ€é«˜åˆ†çš„æ‰æ˜Ÿæ˜Ÿé”äººåå­—
    leaveStart-numï¼šéŠæˆ²ä¸­æ˜Ÿæ˜Ÿå­˜æ´»æ•¸(è‹¥===20ï¼ŒéŠæˆ²çµæŸ)
    getStar-numï¼šç•¶å±€éŠæˆ²ä¸­ç²å¾—æ˜Ÿæ˜Ÿæ•¸
    game-areaï¼šæ˜Ÿæ˜Ÿè·‘å‹•ç¯„åœ
    starNï¼šä¸€èˆ¬æ˜Ÿæ˜Ÿ
    starQï¼šæµæ˜Ÿ
    starIDï¼šæ˜Ÿæ˜Ÿæµæ°´è™Ÿ
  -->
  <script>
    // éŸ³æ•ˆè¼‰å…¥
    const catchMusic = new Audio
    const bgMusic = new Audio
    bgMusic.src = './music/drum_rythm.mp3'
    bgMusic.loop = true
    // éŸ³æ•ˆé™£åˆ—
    let catchMusicList = ['./music/pianoA.mp3', './music/pianoB.mp3', './music/pianoC.mp3', './music/pianoD.mp3', './music/pianoE.mp3', './music/pianoF.mp3', './music/pianoG.mp3', './music/pianoC2.mp3', './music/small_drum.mp3', './music/bass_drum.mp3']


    // å­˜ç•™æ˜Ÿæ˜Ÿæ•¸
    let leaveStart = 0
    // ç²å¾—æ˜Ÿæ˜Ÿæ•¸
    let getStar = 0
    // æ˜Ÿæ˜Ÿå‡ºç¾
    let gametimer = 0
    // å‡ºç¾é€Ÿç‡
    let occur = 1050
    // ç§»å‹•é€Ÿåº¦
    let speed = 3100
    // æ˜Ÿæ˜Ÿæµæ°´è™Ÿ (å¾1é–‹å§‹)
    let starID = 1
    // é”äººåç¨±è¼¸å…¥
    let input = ''

    // è¼‰å…¥é”äººç´€éŒ„ (é”äººåç¨±/é”äººæ˜Ÿæ˜Ÿæ•¸)
    let N1star = { name: '', num: 0 }
    let storage = JSON.parse(localStorage.getItem("N1star"))
    // å¦‚æœæœ‰åˆ†æ•¸ç´€éŒ„(nullç‚ºæ²’æœ‰ç´€éŒ„çš„äºº)
    if (storage != null) {
      // å°‡æ˜Ÿæ˜Ÿé”äººçš„"åå­—"è¼‰å…¥ï¼Œä¸¦ä¿®æ”¹ç¶²é æ–‡å­—
      N1star.name = storage.name
      $('#N1-name').text(N1star.name)
      // TODO å°‡æ˜Ÿæ˜Ÿé”äººçš„"æ•¸é‡"è¼‰å…¥ï¼Œä¸¦ä¿®æ”¹ç¶²é æ–‡å­—
      N1star.num = storage.num
      $('#N1-num').text(`(${N1star.num}é¡†)`)
    }



    // å€é–“éš¨æ©Ÿäº‚æ•¸
    const rand = (min, max) => {
      return Math.round(Math.random() * (max - min) + min)
    }

    // æ˜Ÿæ˜Ÿç§»å‹•éè¿´
    const moveStar = (starID) => {
      $(`#star${starID}`).animate({
        top: rand(0, 100) + "%",
        left: rand(0, 100) + "%"
      }, speed, function () {
        // é€²å…¥éè¿´
        moveStar(starID)
      })
    }

    // JQ åŸ·è¡Œ
    $(function () {
      // æ‰æ˜Ÿæ˜Ÿé–‹å§‹éµ
      $('#go').click(function () {
        // è½‰å ´
        $('#go').text('ğŸš€')
        setTimeout(() => {
          $('#go').css('top', '-55%')
          $('#rule').css('top', '-55%')
          $('body').css('filter', 'brightness(3)')
        }, 600)
        setTimeout(() => {
          $('body').css('filter', 'brightness(1)')
          // æ’­æ”¾èƒŒæ™¯éŸ³æ¨‚
          bgMusic.play()
        }, 900)

        // é‡ç½®é¢æ¿
        leaveStart = 0
        getStar = 0
        $('#leaveStart-num').text(leaveStart)
        $('#getStar-num').text(getStar)
        // é‡ç½®é€Ÿç‡
        occur = 1050
        speed = 3100

        // æ˜Ÿæ˜Ÿå‡ºç¾
        setTimeout(() => {
          gametimer = setInterval(() => {
            // å‡ºç¾é€Ÿç‡ï¼šæ¯æ¬¡-0.05s
            if (occur >= 500) {
              occur -= 50
              console.log(`å‡ºç¾é€Ÿç‡ï¼š${occur}s`);
            }
            // æ˜Ÿæ˜Ÿé€Ÿåº¦ï¼šæ¯æ¬¡-0.1s
            if (speed >= 300) {
              speed -= 50
              console.log(`æ˜Ÿæ˜Ÿè·‘é€Ÿï¼š${speed}s`);
            }
            // é€²è¡Œä¸­ 10é¡†æ˜Ÿæ˜Ÿå…§éƒ½å¯ä»¥æ•æ‰
            if (leaveStart < 10) {
              let num1 = rand(1, 100)
              console.log(`æ˜Ÿæ˜Ÿæ©Ÿç‡åˆ†å¸ƒï¼š${num1}`);
              // æ”¾å…¥ ä¸€èˆ¬æ˜Ÿæ˜Ÿ / æµæ˜Ÿ æ©Ÿç‡ 9.5:0.5----------------
              if (num1 <= 95) {
                // æ”¾å…¥ä¸€èˆ¬æ˜Ÿæ˜ŸN(+æµæ°´è™Ÿ)
                $('#game-area').append(`<img id="star${starID}" class="starN star" src="./images/starN.svg">`)
              }
              else {
                // æ”¾å…¥æµæ˜ŸQ(+æµæ°´è™Ÿ)
                $('#game-area').append(`<img id="star${starID}" class="starQ star" src="./images/starQ.svg">`)
              }
              // å­˜ç•™æ•¸+1
              leaveStart++
              $('#leaveStart-num').text(leaveStart)

              // éš¨æ©Ÿä½ç½®å‡ºç¾ å„25% ä¸Šä¸‹å·¦å³-----------------------
              let num2 = rand(1, 100)
              if (num2 <= 25) {
                // å·¦å´
                $(`#star${starID}`).css({ "top": `${rand(0, 100)}%` })
              }
              else if (num2 >= 26 && num2 <= 50) {
                // å³å´
                $(`#star${starID}`).css({ "top": `${rand(0, 100)}%`, "right": "0" })
              }
              else if (num2 >= 51 && num2 <= 75) {
                // ä¸Š
                $(`#star${starID}`).css({ "left": `${rand(0, 100)}%` })
              }
              else if (num2 >= 76 && num1 <= 100) {
                // ä¸‹
                $(`#star${starID}`).css({ "bottom": "0", "left": `${rand(0, 100)}%` })
              }
              // è®“è©²æ˜Ÿæ˜Ÿé€²å…¥ ç§»å‹•éè¿´
              moveStar(starID)
              // æ˜Ÿæ˜Ÿæµæ°´è™Ÿ
              starID++
            }
            // çµæŸæ¢ä»¶ å­˜ç•™æ˜Ÿæ˜Ÿ10é¡†ä»¥ä¸Š
            else {
              // éŸ³æ¨‚åœæ­¢
              bgMusic.pause()
              bgMusic.currentTime = 0
              // åœæ­¢éŠæˆ²
              clearInterval(gametimer)
              // æ¸…é™¤æ‰€æœ‰æ˜Ÿæ˜Ÿ
              $(".star").remove();
              // æˆç‚ºé”äºº
              if (getStar > N1star.num && N1star.num !== 0) {
                input = prompt(`æ­å–œä½ æˆç‚ºæ–°ä¸€ä»£ æ‰æ˜Ÿæ˜Ÿé”äºº !\nä½ æ‰çš„æ˜Ÿæ˜Ÿæ•¸ ${getStar} é¡†ï¼Œè¶…é ${N1star.name} çš„ ${N1star.num} é¡†ï¼Œä½ å¯¦åœ¨å¤ªå²å®³äº†ğŸ’ªï¼Œæ­å–œä½ å°‡è’™ç¥çœ·é¡§ï¼Œå°‡æ“æœ‰å‡¡äº‹å¯Œè¶³ã€é †åˆ©ã€æ“æœ‰æ™ºæ…§å¥½å¥½äº«å—ä¸€ç”ŸğŸ‘¼ã€‚\nè«‹è¼¸å…¥ä½ çš„åå­—ï¼Œè®“ä¸–äººéƒ½çŸ¥é“ä½ ğŸ™Œ`)
              }
              else if (getStar > N1star.num && N1star.num == 0) {
                input = prompt(`æ­å–œä½ æˆç‚ºç¬¬ä¸€ä»£ æ‰æ˜Ÿæ˜Ÿé”äºº !\nä½ æ‰çš„æ˜Ÿæ˜Ÿæ•¸ ${getStar} é¡†ï¼Œä½ å¯¦åœ¨å¤ªå²å®³äº†ğŸ’ªï¼Œæ­å–œä½ å°‡è’™ç¥çœ·é¡§ï¼Œå°‡æ“æœ‰å‡¡äº‹å¯Œè¶³ã€é †åˆ©ã€æ“æœ‰æ™ºæ…§å¥½å¥½äº«å—ä¸€ç”ŸğŸ‘¼ã€‚\nè«‹è¼¸å…¥ä½ çš„åå­—ï¼Œè®“ä¸–äººéƒ½çŸ¥é“ä½ ğŸ™Œ`)
              }
              else {
                alert(`å“‡ï½ä½ æ•æ‰äº† ${getStar} é¡†ï¼\næ•æ‰è¶Šå¤šæ˜Ÿæ˜Ÿè¶Šå¤šç¥ç¦å”·ï¼\nç¥ç¦ä½ å‡¡äº‹å¯Œè¶³ã€é †åˆ©ï¼Œå¾—åˆ°è¶Šå¤šæ˜Ÿæ˜Ÿï½ğŸ˜€`)
              }
              // é”äººåç¨±è¼¸å…¥åŠå­˜å…¥ localstorage
              // æœ‰è¼¸å…¥åå­—(trimå»é™¤å‰å¾Œç©ºç™½!='')
              if (input != null && input.trim() != '' && getStar > N1star.num) {
                // å°‡è¼¸å…¥çš„åå­—èˆ‡æ˜Ÿæ˜Ÿæ•¸å­˜å…¥è®Šæ•¸
                N1star.name = input
                N1star.num = getStar
                // ä¿®æ”¹é”äººç¶²é æ–‡å­—
                $('#N1-name').text(N1star.name)
                $('#N1-num').text(`(${N1star.num}é¡†)`)
                // *å°‡é”äººè®Šæ•¸"è½‰æ–‡å­—"å¾Œå­˜å…¥ localStorage
                localStorage.setItem("N1star", JSON.stringify(N1star));
              }

              // å›åˆ°æœ€åˆç•«é¢
              setTimeout(() => {
                $('body').css('filter', 'brightness(3)')
              }, 300)
              setTimeout(() => {
                $('#go').text('é–‹å§‹')
                $('#go').css('top', '63.5%')
                $('#rule').css('top', '50%')
                $('body').css('filter', 'brightness(1)')
              }, 600)
            }

          }, occur)
        }, 500)
      })

      // æ•æ‰(é»æ“Š)æ˜Ÿæ˜Ÿ
      // æ•æ‰ä¸€èˆ¬æ˜Ÿæ˜Ÿ !å¦‚æœæ˜¯æœ‰è¤‡å±¤çš„æ¨™ç±¤ éœ€è¦ç”¨åˆ° on('click','é¸åˆ°è©²æ¨™ç±¤')
      $('#game-area').on('mousedown', '.starN', function () {
        // é¢æ¿æ§åˆ¶
        leaveStart--
        getStar++
        $('#leaveStart-num').text(leaveStart)
        $('#getStar-num').text(getStar)
        // æ•´å€‹æ˜Ÿæ˜Ÿæ¨™ç±¤æ¶ˆå¤±
        $(this).remove()
      })
      // æ•æ‰æµæ˜Ÿ (æ‰€æœ‰æ˜Ÿæ˜Ÿéƒ½æ•æ‰èµ·ä¾†)
      $('#game-area').on('mousedown', '.starQ', function () {
        leaveStart -= $('.star').length
        getStar += $('.star').length
        $('#leaveStart-num').text(leaveStart)
        $('#getStar-num').text(getStar)
        // æ•´å€‹æ˜Ÿæ˜Ÿæ¨™ç±¤æ¶ˆå¤±
        $('.star').remove()
      })
      // æ•æ‰æ˜Ÿæ˜Ÿ"ç´”éŸ³æ•ˆæ§åˆ¶"
      $('#game-area').on('mousedown', '.star', function () {
        catchMusic.src = catchMusicList[rand(0, 9)]
        catchMusic.play()
      })


    })
  </script>
</body>

</html>